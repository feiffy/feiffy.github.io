import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c as l,a as n,b as s,d as t,e,r as c}from"./app.6f7e30ef.js";const i={},u=n("h2",{id:"\u521B\u5EFA-zend-\u9879\u76EE",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u521B\u5EFA-zend-\u9879\u76EE","aria-hidden":"true"},"#"),s(" \u521B\u5EFA Zend \u9879\u76EE")],-1),r=n("p",null,"\u8981\u521B\u5EFA Zend \u9879\u76EE\uFF0C\u9996\u5148\u8981\u4E0B\u8F7D\u5E76\u89E3\u538B Zend Framework\u3002",-1),k=n("h2",{id:"\u5B89\u88C5-zend-framework",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5B89\u88C5-zend-framework","aria-hidden":"true"},"#"),s(" \u5B89\u88C5 Zend Framework")],-1),d={href:"https://packages.zendframework.com/releases/ZendFramework-1.12.20/ZendFramework-1.12.20.tar.gz",target:"_blank",rel:"noopener noreferrer"},v=n("p",null,"\u89E3\u538B\u5230\u5408\u9002\u7684\u5730\u65B9\uFF08\u6BD4\u5982\uFF1A/home/xxx/bin/\uFF09.",-1),m=n("p",null,[n("strong",null,"\u6CE8\uFF1A"),s(),n("code",null,"/home/xxx/bin"),s(" \u662F\u6211\u504F\u7231\u7684\u76EE\u5F55\uFF0C\u5982\u679C\u4F60\u8BBE\u5B9A\u4E86\u81EA\u5DF1\u7684\u76EE\u5F55\uFF0C\u5C31\u5E94\u8BE5\u66FF\u6362\u4E0B\u9762\u547D\u4EE4\u4E2D\u76F8\u5E94\u7684\u5730\u65B9")],-1),b=n("p",null,[n("code",null,"$ tar -xzvf ZendFramework-1.12.20.tar.gz -C /home/xxx/bin")],-1),g=n("p",null,"\u8FD9\u6837 Zend Framework \u5C31\u5B89\u88C5\u5728\u4E86 /home/xxx/bin/ZendFramework-1.12.20",-1),h=n("strong",null,"\u6CE81\uFF1A",-1),f={href:"https://framework.zend.com/downloads/archives",target:"_blank",rel:"noopener noreferrer"},y=n("br",null,null,-1),w=n("strong",null,"\u6CE82\uFF1A",-1),_=n("code",null,"$",-1),q=n("h2",{id:"\u521B\u5EFA\u9879\u76EE",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u521B\u5EFA\u9879\u76EE","aria-hidden":"true"},"#"),s(" \u521B\u5EFA\u9879\u76EE")],-1),$={href:"http://zf.sh",target:"_blank",rel:"noopener noreferrer"},x=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /home/xxx/bin/ZendFramework-1.12.20/bin/zf.sh /usr/local/bin/zf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6253\u5F00\u547D\u4EE4\u884C(\u2227 + Alt + T)\uFF0C\u5207\u6362\u5230\u4F60\u60F3\u521B\u5EFA\u9879\u76EE\u7684\u4F4D\u7F6E\uFF0C\u5047\u5982\u4F60\u60F3\u5728 ~/demo/ \u76EE\u5F55\u4E0B\u521B\u5EFA Zend \u9879\u76EE\uFF1A<code>cd ~/demo/</code>\u3002</p><p>\u6267\u884C\u4E0B\u9762\u7684\u547D\u4EE4\u521B\u5EFA <strong>quickstart</strong> \u9879\u76EE\uFF1A</p><p><code>$ zf create project quickstart</code></p><p>\u8FD9\u6837\u5C31\u521B\u5EFA\u4E86 /home/xxx/demo/quickstart\uFF0C\u5E76\u4E14\u5728 quickstart \u76EE\u5F55\u4E0B\u81EA\u52A8\u521B\u5EFA\u4E86 Zend \u9879\u76EE\u7684\u4E00\u4E9B\u76EE\u5F55\u7ED3\u6784\u3002\u5176\u9879\u76EE\u7ED3\u6784\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>quickstart
|-- application
|   |-- Bootstrap.php
|   |-- configs
|   |   \`-- application.ini
|   |-- controllers
|   |   |-- ErrorController.php
|   |   \`-- IndexController.php
|   |-- models
|   \`-- views
|       |-- helpers
|       \`-- scripts
|           |-- error
|           |   \`-- error.phtml
|           \`-- index
|               \`-- index.phtml
|-- library
|-- public
|   |-- .htaccess
|   \`-- index.php
\`-- tests
    |-- application
    |   \`-- bootstrap.php
    |-- library
    |   \`-- bootstrap.php
    \`-- phpunit.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\uFF0C\u53EA\u662F\u521B\u5EFA\u4E86 Zend \u9879\u76EE\u7ED3\u6784\uFF0C\u4F60\u8FD8\u9700\u8981\u628A Zend Framework \u6DFB\u52A0\u5230 quickstart \u9879\u76EE\u4E2D\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u4E00\u4E2D\u662F\u521B\u5EFA\u4E00\u4E2A\u94FE\u63A5\uFF0C\u628A zend \u6846\u67B6\u4E0B\u7684 library \u76EE\u5F55\u94FE\u63A5\u5230 quickstart/library \uFF0C\u53E6\u4E00\u79CD\u65B9\u5F0F\u662F\u76F4\u63A5\u590D\u5236 zend \u6846\u67B6\u4E0B\u7684 library \u76EE\u5F55\u66FF\u6362\u6389 quickstart/library\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Symlink</span>
$ <span class="token builtin class-name">cd</span> library
$ <span class="token function">ln</span> <span class="token parameter variable">-s</span> /home/xxx/bin/ZendFramework-1.12.20/library/Zend <span class="token builtin class-name">.</span>

<span class="token comment"># or copy</span>
$ <span class="token builtin class-name">cd</span> library
$ <span class="token function">cp</span> <span class="token parameter variable">-r</span> /home/xxx/bin/ZendFramework-1.12.20/library/Zend <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u5C31\u53EF\u4EE5\u770B\u5230 quickstart/library/Zend \u76EE\u5F55\u4E86\u3002</p><h2 id="\u9879\u76EE\u542F\u52A8\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u542F\u52A8\u6587\u4EF6" aria-hidden="true">#</a> \u9879\u76EE\u542F\u52A8\u6587\u4EF6</h2><p>Bootstrap \u7C7B\u5B9A\u4E49\u4E86 Zend \u9879\u76EE\u542F\u52A8\u65F6\u8981\u521D\u59CB\u5316\u7684\u8D44\u6E90\u548C\u7EC4\u4EF6\u3002\u9ED8\u8BA4\u5730\uFF0CZend Framework \u521D\u59CB\u5316\u4E86 Front Controller\uFF0C\u7136\u540E\u5B83\u4F7F\u7528 application/controllers/ \u4F5C\u4E3A\u5BFB\u627E action controller \u7684\u9ED8\u8BA4\u8DEF\u5F84\u3002\u8FD9\u4E2A\u7C7B\u5982\u4E0B\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/Bootstrap.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Bootstrap</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Application_Bootstrap_Bootstrap</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4F60\u6240\u89C1\uFF0C\u8FD9\u91CC\u9762\u6CA1\u6709\u4EC0\u4E48\u5185\u5BB9\u3002</p><h2 id="\u9879\u76EE\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u9879\u76EE\u914D\u7F6E\u6587\u4EF6</h2><p>\u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u653E\u5728\uFF1A<em>application/configs/application.ini</em>\uFF0C\u5305\u542B\u4E00\u4E9B\u57FA\u672C\u7684\u6307\u4EE4\uFF0C\u6BD4\u5982\u8BBE\u7F6Ephp\u73AF\u5883\uFF0C\u8BBE\u7F6E\u542F\u52A8\u7C7B\uFF0C\u8BBE\u7F6E action controller \u7B49\u3002\u6587\u4EF6\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment">; application/configs/application.ini</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">production</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">phpSettings.display_startup_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">phpSettings.display_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">includePaths.library</span> <span class="token punctuation">=</span> <span class="token value attr-value">APPLICATION_PATH &quot;/../library&quot;</span>
<span class="token key attr-name">bootstrap.path</span> <span class="token punctuation">=</span> <span class="token value attr-value">APPLICATION_PATH &quot;/Bootstrap.php&quot;</span>
<span class="token key attr-name">bootstrap.class</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;<span class="token inner-value">Bootstrap</span>&quot;</span>
<span class="token key attr-name">appnamespace</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;<span class="token inner-value">Application</span>&quot;</span>
<span class="token key attr-name">resources.frontController.controllerDirectory</span> <span class="token punctuation">=</span> <span class="token value attr-value">APPLICATION_PATH &quot;/controllers&quot;</span>
<span class="token key attr-name">resources.frontController.params.displayExceptions</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">staging : production</span><span class="token punctuation">]</span></span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">testing : production</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">phpSettings.display_startup_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">1</span>
<span class="token key attr-name">phpSettings.display_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">1</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">development : production</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">phpSettings.display_startup_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">1</span>
<span class="token key attr-name">phpSettings.display_errors</span> <span class="token punctuation">=</span> <span class="token value attr-value">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5173\u4E8E\u8FD9\u4E2A\u6587\u4EF6\u6709\u51E0\u4E2A\u8981\u70B9\uFF1A<br> (1) \u4F7F\u7528 ini \u914D\u7F6E\u6587\u4EF6\u65F6\uFF0C\u4F60\u53EF\u4EE5\u76F4\u63A5\u5F15\u7528\u5E38\u91CF\uFF0C<strong>APPLICATION_PATH</strong> \u5C31\u662F\u4E00\u4E2A\u5E38\u91CF\u3002<br> (2) \u8FD9\u4E2A\u6587\u4EF6\u88AB\u5206\u6210\u51E0\u4E2A\u90E8\u5206\uFF1Aproduction,staging,testing \u548C development\u3002\u540E\u9762\u4E09\u4E2A\u5305\u62EC\u4E86 production \u7684\u8BBE\u7F6E\u3002\u4E0D\u540C\u7684\u73AF\u5883\u5176\u914D\u7F6E\u5206\u5F00\uFF0C\u8FD9\u6837\u4FBF\u4E8E\u5F00\u53D1\u548C\u8C03\u8BD5\u3002</p><h2 id="action-controller-\u63A7\u5236\u5668" tabindex="-1"><a class="header-anchor" href="#action-controller-\u63A7\u5236\u5668" aria-hidden="true">#</a> Action Controller \u63A7\u5236\u5668</h2><p>\u5E94\u7528\u7A0B\u5E8F\u7684 action controller \u5B9A\u4E49\u4E86\u7A0B\u5E8F\u6D41\u7A0B\uFF0C\u628A\u7528\u6237\u8BF7\u6C42\u6620\u5C04\u5230\u5408\u9002\u7684 model \u548C view\u3002</p><p>\u4E00\u4E2A action controller \u5E94\u5305\u542B\u4E00\u4E2A\u6216\u591A\u4E2A\u4EE5<strong>Action</strong>\u7ED3\u5C3E\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u901A\u8FC7 web \u8BF7\u6C42\u8BBF\u95EE\u5230\u3002\u9ED8\u8BA4\u5730\uFF0CZend Framework URLs \u9075\u5FAA /controller/action \u7684\u6A21\u5F0F\uFF0C\u5176\u4E2D controller \u5C31\u6620\u5C04 action controller \u540D\u5B57\uFF08\u4EE5Controller\u4F5C\u4E3A\u540E\u7F00\uFF09\uFF0C\u800C action \u5C31\u6620\u5C04\u5230 action \u65B9\u6CD5\uFF08\u4EE5Action\u4F5C\u4E3A\u540E\u7F00\uFF09\u3002</p><p>\u901A\u5E38\uFF0C\u9700\u8981\u4E00\u4E2A IndexController\uFF0C\u5B83\u8868\u793A\u7F51\u7AD9\u9996\u9875\uFF0C\u548C\u4E00\u4E2A ErrorController\uFF0C\u5B83\u8868\u793A\u8BF8\u5982 HTTP404\u3001HTTP500 \u7B49\u9519\u8BEF\u9875\u9762.</p><p>\u521D\u59CB IndexController \u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/controllers/IndexController.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">IndexController</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Controller_Action</span>
<span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">/* Initialize action controller here */</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">indexAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// action body</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521D\u59CB ErrorController \u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/controllers/ErrorController.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">ErrorController</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Controller_Action</span>
<span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">errorAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$errors</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">_getParam</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;error_handler&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-&gt;</span><span class="token property">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token class-name static-context">Zend_Controller_Plugin_ErrorHandler</span><span class="token operator">::</span><span class="token constant">EXCEPTION_NO_ROUTE</span><span class="token punctuation">:</span>
            <span class="token keyword">case</span> <span class="token class-name static-context">Zend_Controller_Plugin_ErrorHandler</span><span class="token operator">::</span><span class="token constant">EXCEPTION_NO_CONTROLLER</span><span class="token punctuation">:</span>
            <span class="token keyword">case</span> <span class="token class-name static-context">Zend_Controller_Plugin_ErrorHandler</span><span class="token operator">::</span><span class="token constant">EXCEPTION_NO_ACTION</span><span class="token punctuation">:</span>
 
                <span class="token comment">// 404 error -- controller or action not found</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setHttpResponseCode</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">view</span><span class="token operator">-&gt;</span><span class="token property">message</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Page not found&#39;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
                <span class="token comment">// application error</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setHttpResponseCode</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">view</span><span class="token operator">-&gt;</span><span class="token property">message</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Application error&#39;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">view</span><span class="token operator">-&gt;</span><span class="token property">exception</span> <span class="token operator">=</span> <span class="token variable">$errors</span><span class="token operator">-&gt;</span><span class="token property">exception</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">view</span><span class="token operator">-&gt;</span><span class="token property">request</span>   <span class="token operator">=</span> <span class="token variable">$errors</span><span class="token operator">-&gt;</span><span class="token property">request</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="views-\u89C6\u56FE" tabindex="-1"><a class="header-anchor" href="#views-\u89C6\u56FE" aria-hidden="true">#</a> Views \u89C6\u56FE</h2><p>Zend Framework \u4E2D\u7684 Views \u662F\u7528\u666E\u901A PHP \u4EE3\u7801\u5199\u7684\u3002View scripts \u5728 application/views/scripts/ \u4E0B\u9762\uFF0C\u5B83\u4EE5\u63A7\u5236\u5668\u540D\u5B57\u5206\u6587\u4EF6\u5939\u7EC4\u7EC7\u8D77\u6765\u3002\u672C\u4F8B\u4E2D\uFF0C\u6211\u4EEC\u6709\u4E00\u4E2A IndexController \u548C ErrorController\uFF0C\u56E0\u6B64\u76F8\u5E94\u5730\uFF0C\u4E5F\u5E94\u5728 View scripts \u76EE\u5F55\u4E0B\u6709 index/ \u548C error/ \u5B50\u76EE\u5F55\u3002\u5728\u8FD9\u4E2A\u5B50\u76EE\u5F55\u4E2D\uFF0C\u53C8\u6709\u6BCF\u4E2A view scripts \u6587\u4EF6\uFF0C\u5BF9\u5E94 Controller \u4E2D\u7684 Action\u3002\u672C\u4F8B\u4E2D\uFF0C\u4F7F\u7528 index/index.phtml \u548C error/error.phtml\u3002</p><p>\u4E0B\u9762\u662F\u9ED8\u8BA4\u7684 index/index.phtml view script:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- application/views/scripts/index/index.phtml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
 
    <span class="token selector">a:link,
    a:visited</span>
    <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #0398CA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token selector">span#zf-name</span>
    <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #91BE3F<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token selector">div#welcome</span>
    <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #FFFFFF<span class="token punctuation">;</span>
        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>http://framework.zend.com/images/bkg_header.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span>  600px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #444444<span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token selector">div#more-information</span>
    <span class="token punctuation">{</span>
        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>http://framework.zend.com/images/bkg_body-bottom.gif<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>welcome<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Welcome to the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zf-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Zend Framework!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>This is your project&#39;s main page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>more-information<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://framework.zend.com/images/PoweredBy_ZF_4LightBG.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            Helpful Links: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://framework.zend.com/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Zend Framework Website<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> |
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://framework.zend.com/manual/en/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Zend Framework
                Manual<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>error/error.phtml \u7A0D\u5FAE\u590D\u6742\u4E00\u70B9\uFF0C\u5176\u4E2D\u4F7F\u7528\u4E86php\u6761\u4EF6\u8BED\u53E5\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">&lt;!-- application/views/scripts/error/error.phtml --&gt;</span>
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;;
    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html; charset=utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Zend Framework Default Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>An error occurred<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">message</span> <span class="token delimiter important">?&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
 
  <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;development&#39;</span> <span class="token operator">==</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">env</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token delimiter important">?&gt;</span></span>
 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Exception information:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>Message:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span> <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">exception</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token delimiter important">?&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Stack trace:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">exception</span><span class="token operator">-&gt;</span><span class="token function">getTraceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token delimiter important">?&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Request Parameters:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">var_export</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">request</span><span class="token operator">-&gt;</span><span class="token function">getParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token delimiter important">?&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
  <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">endif</span> <span class="token delimiter important">?&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u521B\u5EFA\u865A\u62DF\u4E3B\u673A" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u865A\u62DF\u4E3B\u673A" aria-hidden="true">#</a> \u521B\u5EFA\u865A\u62DF\u4E3B\u673A</h2><p>\u5BF9\u4E8E quickstart \u9879\u76EE\uFF0C\u6211\u4EEC\u628A\u5B83\u653E\u5728 apache \u670D\u52A1\u5668\u4E0A\u8FD0\u884C\u3002</p>`,33),T={href:"http://www.cnblogs.com/feifeifanye/p/6150551.html",target:"_blank",rel:"noopener noreferrer"},A=e(`<p>\u5047\u8BBE\u6211\u4EEC\u7684\u9879\u76EE\u6240\u6620\u5C04\u7684\u57DF\u540D\u662F\uFF1Aquickstart.local\u3002</p><p>\u8FDB\u5165 apache \u914D\u7F6E\u76EE\u5F55\uFF0C\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/apache2/sites-available/
<span class="token function">sudo</span> gedit quickstart.local.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u590D\u5236\u4E0B\u9762\u7684\u5185\u5BB9\u5230\u8BE5\u914D\u7F6E\u6587\u4EF6\uFF0C<strong>\u6CE8\u610F</strong>\uFF1A\u9879\u76EE\u8DEF\u5F84\u9700\u8981\u66FF\u6362\u6210\u4F60\u81EA\u5DF1\u7684\u9879\u76EE\u8DEF\u5F84\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>80</span><span class="token punctuation">&gt;</span></span>
	ServerName quickstart.local

	ServerAdmin webmaster@localhost
	DocumentRoot /home/xxx/demo/quickstart/public

	&lt;Directory /home/xxx/demo/quickstart/public&gt;
	AllowOverride all
	require all granted
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">&gt;</span></span>

	ErrorLog \${APACHE_LOG_DIR}/error.log
	CustomLog \${APACHE_LOG_DIR}/access.log combined

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FDD\u5B58\u8BE5\u6587\u4EF6\uFF0C\u5E76\u4E14\u542F\u7528\u8BE5\u914D\u7F6E\uFF1A<code>sudo a2ensite quickstart.local</code></p><p>\u7136\u540E\u6253\u5F00hosts\u6587\u4EF6\uFF1A<code>sudo gedit /etc/hosts</code> \u6DFB\u52A0\u4E00\u884C\uFF1A<br><code>127.0.0.1 quickstart.local</code></p><p>\u6700\u540E\u91CD\u542F\u4E00\u4E0B apache \u670D\u52A1\u5668:<br><code>sudo service apache2 restart</code></p><p>\u5230\u6B64\u4E3A\u6B62\uFF0C\u8FD9\u4E2A\u9879\u76EE\u5C31\u521B\u5EFA\u6210\u529F\u5E76\u4E14\u53EF\u8FD0\u884C\u4E86\u3002</p><h2 id="\u68C0\u9A8C\u6210\u679C" tabindex="-1"><a class="header-anchor" href="#\u68C0\u9A8C\u6210\u679C" aria-hidden="true">#</a> \u68C0\u9A8C\u6210\u679C</h2><p>\u73B0\u5728\u5C31\u53EF\u4EE5\u8BBF\u95EE\u4F60\u7684\u9879\u76EE\u7F51\u7AD9\u4E86\uFF0C\u6253\u5F00\u6D4F\u89C8\u5668\u8F93\u5165<code>http://quickstart.local</code>\uFF0C\u5C31\u80FD\u770B\u5230\u6B22\u8FCE\u9875\u4E86\u3002</p><p>![[ddb946d216db6a8575bef69f77779568.png]]</p><h3 id="\u53EF\u80FD\u9047\u5230\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u53EF\u80FD\u9047\u5230\u7684\u95EE\u9898" aria-hidden="true">#</a> \u53EF\u80FD\u9047\u5230\u7684\u95EE\u9898\uFF1A</h3><ol><li>\u9875\u9762\u4E0D\u663E\u793A\uFF1A\u5F88\u6709\u53EF\u80FD\u65F6\u9879\u76EE\u76EE\u5F55\u7684\u6743\u9650\u95EE\u9898\uFF0C\u4F7F\u7528 <code>chmod -R 777 /home/xxx/demo/quickstart</code> \u8BD5\u8BD5\u770B\u3002</li></ol><h1 id="\u521B\u5EFA\u4E00\u4E2A-layout" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u4E00\u4E2A-layout" aria-hidden="true">#</a> \u521B\u5EFA\u4E00\u4E2A Layout</h1><p>\u4F60\u53EF\u80FD\u6CE8\u610F\u5230\uFF0C\u4E0A\u9762\u7684 view scripts \u4E0D\u662F\u5B8C\u6574\u7684 html \u9875\u9762\uFF0C\u8FD9\u662F\u6545\u610F\u8BBE\u8BA1\u7684\u3002\u6211\u4EEC\u53EA\u60F3\u8BA9 action \u53EA\u8FD4\u56DE action \u672C\u8EAB\u8981\u8F93\u51FA\u7684\u5185\u5BB9\uFF0C\u800C\u4E0D\u662F\u6574\u4E2A\u5E94\u7528\u7A0B\u5E8F\u9875\u9762\u3002</p><p>\u73B0\u5728\u6765\u7EC4\u6210\u4E00\u4E2A\u5B8C\u6574\u7684 HTML \u9875\u9762\u3002\u6211\u4EEC\u4F7F\u7528\u4E00\u4E2A\u5168\u5C40\u7684 layout \u6765\u4F5C\u4E3A\u7F51\u7AD9\u7EDF\u4E00\u7684\u6837\u5F0F\u3002</p><p><strong>\u6CE8\uFF1A</strong> \u4E0B\u9762\u7684\u547D\u4EE4\u82E5\u65E0\u8BF4\u660E\uFF0C\u9ED8\u8BA4\u662F\u5728\u5F53\u524D\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u6267\u884C\u7684\u3002</p><p>\u5F00\u59CB\u4F7F\u7528 <code>Zend_Layout</code>\uFF0C\u9996\u5148\u8BA9 bootstrap \u6765\u52A0\u8F7D Layout \u8D44\u6E90\u3002\u901A\u8FC7\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u5B9E\u73B0\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token variable">$zf</span> <span class="token builtin class-name">enable</span> layout
<span class="token comment"># Layouts have been enabled, and a default layout created at</span>
<span class="token comment"># application/layouts/scripts/layout.phtml</span>
<span class="token comment"># A layout entry has been added to the application config file.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\uFF0C<em>application/configs/application.ini</em> \u5185\u5BB9\u81EA\u52A8\u66F4\u65B0\u4E86\uFF1A</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment">; application/configs/application.ini</span>
 
<span class="token comment">; Add to [production] section:</span>
<span class="token key attr-name">resources.layout.layoutPath</span> <span class="token punctuation">=</span> <span class="token value attr-value">APPLICATION_PATH &quot;/layouts/scripts&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u6307\u4EE4\u544A\u8BC9\u5E94\u7528\u7A0B\u5E8F\u53BB <em>application/layouts/scripts</em> \u53BB\u5BFB\u627E layout\u3002</p><p>\u6211\u4EEC\u8FD8\u8981\u542F\u7528 XHTML DocType \u58F0\u660E\uFF0C\u4E3A\u6B64\uFF0C\u5728 bootstrap \u4E2D\u52A0\u8F7D\u8BE5\u8D44\u6E90\u3002\u5728 bootstrap\u4E2D\u6DFB\u52A0\u8D44\u6E90\u7684\u6700\u7B80\u5355\u7684\u65B9\u6CD5\u5C31\u662F\u521B\u5EFA\u4E00\u4E2A\u4EE5init\u5F00\u5934\u7684\u65B9\u6CD5\u3002\u6B64\u65F6\uFF0C\u6211\u4EEC\u4F7F\u7528 _initDoctype() \u65B9\u6CD5\u6765\u521D\u59CB\u5316 doctype\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/Bootstrap.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Bootstrap</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Application_Bootstrap_Bootstrap</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">_initDoctype</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6709\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u8FD8\u9700\u8981\u8BA9 view \u4F7F\u7528\u6B63\u786E\u7684 doctype\uFF0C\u4F46\u662F view \u4ECE\u54EA\u91CC\u6765\uFF1F\u6700\u7B80\u5355\u7684\u65B9\u5F0F\u5C31\u662F\u521D\u59CB\u5316 View \u8D44\u6E90\uFF1B\u6709\u4E86\u5B83\uFF0C\u5C31\u53EF\u4EE5\u628A view \u5BF9\u8C61\u653E\u5165 bootstrap \u5E76\u4F7F\u7528\u5B83\u3002</p><p>\u6DFB\u52A0\u4E0B\u884C\u5230 aplication/configs/application.ini \u6765\u521B\u5EFA view \u8D44\u6E90:</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment">; application/configs/application.ini</span>
 
<span class="token comment">; Add to [production] section:</span>
<span class="token key attr-name">resources.view[]</span> <span class="token punctuation">=</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u518D\u6765\u5145\u5B9E\u4E00\u4E0B _initDoctype() \u65B9\u6CD5\u3002</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/Bootstrap.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Bootstrap</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Application_Bootstrap_Bootstrap</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">_initDoctype</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;view&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$view</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;view&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$view</span><span class="token operator">-&gt;</span><span class="token function">doctype</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;XHTML1_STRICT&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\uFF0C\u521B\u5EFA\u5168\u5C40\u7684 layout\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- application/layouts/scripts/layout.phtml --&gt;</span>
<span class="token prolog">&lt;?php echo $this-&gt;doctype() ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html; charset=utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Zend Framework Quickstart Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token prolog">&lt;?php echo $this-&gt;headLink()-&gt;appendStylesheet(&#39;/css/global.css&#39;) ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> #EEEEEE<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header-logo<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">float</span><span class="token punctuation">:</span> left</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>ZF Quickstart Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header-navigation<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">float</span><span class="token punctuation">:</span> right</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;?php echo $this-&gt;url(
            array(&#39;controller&#39;=&gt;&#39;guestbook&#39;),
            &#39;default&#39;,
            true) ?&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Guestbook<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 
<span class="token prolog">&lt;?php echo $this-&gt;layout()-&gt;content ?&gt;</span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528<code>headLink()</code>\u6765\u751F\u6210<code>&lt;link&gt;</code>\u5143\u7D20\u3002</p><p>\u73B0\u5728\u518D\u6253\u5F00\u6D4F\u89C8\u5668\u5E76\u67E5\u770B\u6E90\u4EE3\u7801\uFF0C\u5E94\u8BE5\u80FD\u770B\u5230 XHTML\u5934\u90E8\uFF0C<code>&lt;head&gt; &lt;title&gt; &lt;body&gt;</code>\u7B49\u90E8\u5206\u3002</p><p>![[e5818d0598d7b4a59056aa513432a220.png]] ![[37058def8908094e831a5bc03d8f92cb.png]]</p><h2 id="\u521B\u5EFA\u4E00\u4E2A-model-\u548C-database-table" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u4E00\u4E2A-model-\u548C-database-table" aria-hidden="true">#</a> \u521B\u5EFA\u4E00\u4E2A Model \u548C Database Table</h2><p>\u73B0\u5728\u8003\u8651\u4E00\u4E0Bguestbook\u7684\u7EC4\u6210\uFF0C\u5B83\u5305\u542B\u4E00\u4E9B\u8BB0\u5F55\uFF0C\u6BCF\u4E2A\u8BB0\u5F55\u7531\u6CE8\u91CA\uFF0C\u65F6\u95F4\u6233\uFF0Cemail\u5730\u5740\u7B49\u7EC4\u6210\u3002\u6211\u4EEC\u628A\u5B83\u5B58\u5728\u6570\u636E\u5E93\u91CC\uFF0C\u5E76\u6709\u4E00\u4E2A\u552F\u4E00id\u3002\u6211\u4EEC\u5E0C\u671B\u80FD\u4FDD\u5B58\u3001\u83B7\u53D6\u6240\u6709\u8BB0\u5F55\u3002</p><p>\u56E0\u6B64\uFF0C\u4E00\u4E2A\u7B80\u5355\u7684 guestbook \u6A21\u578B API \u5C31\u50CF\u4E0B\u9762\u8FD9\u6837\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/models/Guestbook.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Application_Model_Guestbook</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$_comment</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$_created</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$_email</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$_id</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__set</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__get</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setComment</span><span class="token punctuation">(</span><span class="token variable">$text</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setEmail</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setCreated</span><span class="token punctuation">(</span><span class="token variable">$ts</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getCreated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setId</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Application_Model_GuestbookMapper</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Application_Model_Guestbook</span> <span class="token variable">$guestbook</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">fetchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5F00\u59CB\u601D\u8003\u5982\u4F55\u8BBE\u7F6E\u6570\u636E\u5E93\u4E86\u3002</p><p>\u9996\u5148\u8981\u521D\u59CB\u5316 Db \u8D44\u6E90\u3002\u4F7F\u7528 zf configure db-adapter \u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>zf configure db-adapter <span class="token string">&quot;adapter=Pdo_MySql&amp;host=localhost&amp;username=root&amp;password=&amp;dbname=guestbook&quot;</span> production

zf configure db-adapter <span class="token string">&quot;adapter=Pdo_MySql&amp;host=localhost&amp;username=root&amp;password=&amp;dbname=guestbook-test&quot;</span> testing

zf configure db-adapter <span class="token string">&quot;adapter=Pdo_MySql&amp;host=localhost&amp;username=root&amp;password=&amp;dbname=guestbook-dev&quot;</span> development
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6210\u529F\u6267\u884C\uFF0C\u90A3\u4E48\u5728 <em>application/configs/application.ini</em> \u4E2D\u5C31\u80FD\u770B\u5230\u65B0\u589E\u7684\u51E0\u884C\u914D\u7F6E\uFF1A</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code>//application/configs/application.ini

<span class="token key attr-name">resources.db.adapter</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;<span class="token inner-value">Pdo_MySql</span>&quot;</span>
<span class="token key attr-name">resources.db.params.host</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;<span class="token inner-value">localhost</span>&quot;</span>
<span class="token key attr-name">resources.db.params.username</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;<span class="token inner-value">root</span>&quot;</span>
<span class="token key attr-name">resources.db.params.password</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;&quot;</span>
<span class="token key attr-name">resources.db.params.dbname</span> <span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">guestbook</span>&quot;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**\u6CE8\uFF1A**\u8981\u628A\u6570\u636E\u5E93\u5BC6\u7801\u8BBE\u7F6E\u6210\u4F60\u81EA\u5DF1\u7684\u3002</p><p>\u7136\u540E\u521B\u5EFA\u6570\u636E\u5E93\uFF0C\u6253\u5F00 phpMyadmin\uFF0C\u521B\u5EFA\u6570\u636E\u5E93 <strong>guestbook</strong>\uFF0C\u8F93\u5165\u4E0B\u9762SQL\u8BED\u53E5\u5E76\u6267\u884C\uFF1A</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">\`</span>guestbook<span class="token punctuation">\`</span></span> <span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>email<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;noemail@test.com&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>comment<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>created<span class="token punctuation">\`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>MyISAM  <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>latin1 <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,47),C={href:"http://martinfowler.com/eaaCatalog/tableDataGateway.html",target:"_blank",rel:"noopener noreferrer"},E=n("code",null,"Zend_Db_Table",-1),P=e(`<p>\u9996\u5148\u521B\u5EFA\u4E00\u4E2A <code>Zend_Db_Table</code> \u7C7B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ zf create db-table Guestbook guestbook
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770B\u9879\u76EE\u7ED3\u6784\uFF0C\u53D1\u73B0\u591A\u4E86\u4E00\u4E2A <em>application/models/DbTable/</em> \u76EE\u5F55\uFF0C\u91CC\u9762\u6709\u4E00\u4E2A Guestbook.php \u6587\u4EF6\u3002\u5176\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/models/DbTable/Guestbook.php</span>
 
<span class="token doc-comment comment">/**
* This is the DbTable class for the guestbook table.
*/</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Application_Model_DbTable_Guestbook</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Db_Table_Abstract</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** Table name */</span>
    <span class="token keyword">protected</span> <span class="token variable">$_name</span>    <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;guestbook&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F</strong> <code>Application_Model_DbTable</code> \u7C7B\u524D\u7F00\uFF0C\u5B83\u5BF9\u5E94 <em>application/models/DbTable</em> \u76EE\u5F55\u3002</p>`,5),Z={href:"http://martinfowler.com/eaaCatalog/dataMapper.html",target:"_blank",rel:"noopener noreferrer"},I=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ zf create model GuestbookMapper
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u6253\u5F00 application/models/GuestbookMapper.php \u5E76\u8F93\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/models/GuestbookMapper.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Application_Model_GuestbookMapper</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$_dbTable</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setDbTable</span><span class="token punctuation">(</span><span class="token variable">$dbTable</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$dbTable</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$dbTable</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token variable">$dbTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$dbTable</span> <span class="token keyword">instanceof</span> <span class="token class-name">Zend_Db_Table_Abstract</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Invalid table data gateway provided&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_dbTable</span> <span class="token operator">=</span> <span class="token variable">$dbTable</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getDbTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">null</span> <span class="token operator">===</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_dbTable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">setDbTable</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Application_Model_DbTable_Guestbook&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_dbTable</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Application_Model_Guestbook</span> <span class="token variable">$guestbook</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token variable">$guestbook</span><span class="token operator">-&gt;</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;comment&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$guestbook</span><span class="token operator">-&gt;</span><span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;created&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Y-m-d H:i:s&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">null</span> <span class="token operator">===</span> <span class="token punctuation">(</span><span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$guestbook</span><span class="token operator">-&gt;</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getDbTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getDbTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id = ?&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Application_Model_Guestbook</span> <span class="token variable">$guestbook</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getDbTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$row</span> <span class="token operator">=</span> <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$guestbook</span><span class="token operator">-&gt;</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">)</span>
                  <span class="token operator">-&gt;</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span>
                  <span class="token operator">-&gt;</span><span class="token function">setComment</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">comment</span><span class="token punctuation">)</span>
                  <span class="token operator">-&gt;</span><span class="token function">setCreated</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">created</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">fetchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$resultSet</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getDbTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$entries</span>   <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$resultSet</span> <span class="token keyword">as</span> <span class="token variable">$row</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$entry</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application_Model_Guestbook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$entry</span><span class="token operator">-&gt;</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">)</span>
                  <span class="token operator">-&gt;</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span>
                  <span class="token operator">-&gt;</span><span class="token function">setComment</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">comment</span><span class="token punctuation">)</span>
                  <span class="token operator">-&gt;</span><span class="token function">setCreated</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-&gt;</span><span class="token property">created</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$entries</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$entry</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token variable">$entries</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\uFF0C\u521B\u5EFA model \u7C7B\uFF0C\u4ECD\u7136\u4F7F\u7528 zf \u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ zf create model Guestbook
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6253\u5F00\u521A\u521A\u521B\u5EFA\u7684\u6A21\u578B\u7C7B\uFF1A application/models/Guestbook.php \u5E76\u6DFB\u52A0\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/models/Guestbook.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Application_Model_Guestbook</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$_comment</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$_created</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$_email</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$_id</span><span class="token punctuation">;</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__set</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$method</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;set&#39;</span> <span class="token operator">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;mapper&#39;</span> <span class="token operator">==</span> <span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">method_exists</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">,</span> <span class="token variable">$method</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Invalid guestbook property&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__get</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$method</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;get&#39;</span> <span class="token operator">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;mapper&#39;</span> <span class="token operator">==</span> <span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">method_exists</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">,</span> <span class="token variable">$method</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Invalid guestbook property&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setOptions</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$options</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$methods</span> <span class="token operator">=</span> <span class="token function">get_class_methods</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$options</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$method</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;set&#39;</span> <span class="token operator">.</span> <span class="token function">ucfirst</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token punctuation">,</span> <span class="token variable">$methods</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setComment</span><span class="token punctuation">(</span><span class="token variable">$text</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_comment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">string</span><span class="token punctuation">)</span> <span class="token variable">$text</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_comment</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setEmail</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_email</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">string</span><span class="token punctuation">)</span> <span class="token variable">$email</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_email</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setCreated</span><span class="token punctuation">(</span><span class="token variable">$ts</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_created</span> <span class="token operator">=</span> <span class="token variable">$ts</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getCreated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_created</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setId</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_id</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_id</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u540E\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A guestbook controller \u67E5\u8BE2\u5E76\u663E\u793A\u6570\u636E\u5E93\u4E2D\u7684\u7ED3\u679C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ zf create controller Guestbook
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u521B\u5EFA <em>application/controllers/GuestbookController.php</em>\uFF0C\u5B83\u6709\u4E00\u4E2A <code>IndexAction</code> \u65B9\u6CD5\uFF0C\u540C\u65F6\uFF0C\u5728 <em>application/views/scripts/guestbook</em> \u76EE\u5F55\u4E2D\u521B\u5EFA\u4E86\u4E00\u4E2A index.phtml \u6587\u4EF6\u3002</p><p>\u6253\u5F00 GuestbookController\uFF0C\u5728 IndexAction \u4E2D\u6DFB\u52A0\u4EE3\u7801\uFF0C\u663E\u793A\u6240\u6709\u7684 guestbook \u8BB0\u5F55\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/controllers/GuestbookController.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">GuestbookController</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Controller_Action</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">indexAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$guestbook</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application_Model_GuestbookMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">view</span><span class="token operator">-&gt;</span><span class="token property">entries</span> <span class="token operator">=</span> <span class="token variable">$guestbook</span><span class="token operator">-&gt;</span><span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6253\u5F00 <em>application/views/scripts/guestbook/index.phtml</em> \u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">&lt;!-- application/views/scripts/guestbook/index.phtml --&gt;</span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">url</span><span class="token punctuation">(</span>
    <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token string single-quoted-string">&#39;controller&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;guestbook&#39;</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">&#39;action&#39;</span>     <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;sign&#39;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;default&#39;</span><span class="token punctuation">,</span>
    <span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token delimiter important">?&gt;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Sign Our Guestbook<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 
Guestbook Entries: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">entries</span> <span class="token keyword">as</span> <span class="token variable">$entry</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token delimiter important">?&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">escape</span><span class="token punctuation">(</span><span class="token variable">$entry</span><span class="token operator">-&gt;</span><span class="token property">email</span><span class="token punctuation">)</span> <span class="token delimiter important">?&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">escape</span><span class="token punctuation">(</span><span class="token variable">$entry</span><span class="token operator">-&gt;</span><span class="token property">comment</span><span class="token punctuation">)</span> <span class="token delimiter important">?&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">endforeach</span> <span class="token delimiter important">?&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),M={href:"http://guestbook.local/guestbook",target:"_blank",rel:"noopener noreferrer"},L=e(`<p>\u53D1\u73B0\u6CA1\u6709\u6570\u636E\uFF0C\u90A3\u5C31\u6253\u5F00 phpMyadmin\uFF0C\u63D2\u5165\u4E00\u4E9B\u6570\u636E\u518D\u770B\u770B\uFF0C\u590D\u5236\u4E0B\u9762\u7684sql\u8BED\u53E5\u5230phpmyadmin\u5E76\u6267\u884C\uFF1A</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">\`</span>guestbook<span class="token punctuation">\`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">\`</span>guestbook<span class="token punctuation">\`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>email<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>comment<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>created<span class="token punctuation">\`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">&#39;noemail@qq.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;good&#39;</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">&#39;noemail2@qq.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;good book&#39;</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">&#39;noemail3@qq.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;good book ok&#39;</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5237\u65B0\u6D4F\u89C8\u5668\uFF0C\u7ED3\u679C\u5982\u56FE\u6240\u793A\uFF0C\u6210\u529F\u5730\u4ECE\u6570\u636E\u5E93\u8BFB\u53D6\u6570\u636E\u5E76\u663E\u793A\u5728\u9875\u9762\u4E0A\uFF1A ![[52e35508b701d038a5aa6355d79aceeb.png]]</p><h2 id="\u521B\u5EFA-form" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-form" aria-hidden="true">#</a> \u521B\u5EFA Form</h2><p>\u4E3A\u4E86\u8BA9 guestbook \u66F4\u6709\u7528\u4E00\u4E9B\uFF0C\u6211\u4EEC\u9700\u8981\u4E00\u4E2A\u8868\u5355\u6765\u63D0\u4EA4\u65B0\u7684\u8BC4\u8BBA\u9879\u3002</p><p>\u9996\u5148\uFF0C\u521B\u5EFA\u4E00\u4E2A form \u7C7B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ zf create form Guestbook
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6253\u5F00\u521A\u521B\u5EFA\u7684 form \u7C7B *application/forms/Guestbook.php *\uFF0C\u6DFB\u52A0\u4E0B\u5217\u4EE3\u7801\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/forms/Guestbook.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Application_Form_Guestbook</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Form</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Set the method for the display form to POST</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">setMethod</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;post&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">// Add an email element</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;text&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;label&#39;</span>      <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Your email address:&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;required&#39;</span>   <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;filters&#39;</span>    <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;StringTrim&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;validators&#39;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">&#39;EmailAddress&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">// Add the comment element</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;textarea&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;comment&#39;</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;label&#39;</span>      <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Please Comment:&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;required&#39;</span>   <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;validators&#39;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;validator&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;StringLength&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;options&#39;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">// Add a captcha</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;captcha&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;captcha&#39;</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;label&#39;</span>      <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Please enter the 5 letters displayed below:&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;required&#39;</span>   <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;captcha&#39;</span>    <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">&#39;captcha&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Figlet&#39;</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;wordLen&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">5</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;timeout&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">300</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">// Add the submit button</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;submit&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;submit&#39;</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;ignore&#39;</span>   <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;label&#39;</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Sign Guestbook&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">// And finally add some CSRF protection</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;hash&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;csrf&#39;</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;ignore&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u5B9A\u4E49\u4E86\u4E94\u4E2A\u5143\u7D20\uFF1Aemail\u5730\u5740\uFF0C\u8BC4\u8BBA\u8F93\u5165\u6846\uFF0C\u9A8C\u8BC1\u7801\uFF0C\u63D0\u4EA4\u6309\u94AE\u548CCSRF\u4FDD\u62A4\u5B57\u6BB5\u3002</p><p>\u4E0B\u4E00\u6B65\uFF0C\u6DFB\u52A0 <code>signAction</code> \u5230 <code>GuestbookController</code>\uFF0C\u5B83\u7528\u4E8E\u5904\u7406\u8868\u5355\u63D0\u4EA4\u9875\u9762\u3002\u4F7F\u7528 zf \u547D\u4EE4\u521B\u5EFA\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ zf create action sign Guestbook
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E86 signAction \u548C\u76F8\u5E94\u7684 view script.</p><p>\u7136\u540E\u6DFB\u52A0\u4E00\u4E9B\u4EE3\u7801\u5230 signAction\uFF0C\u9996\u5148\u68C0\u67E5\u662F\u5426\u6709POST\u6216GET\u8BF7\u6C42\uFF0C\u7136\u540E\u82E5\u6CA1\u6709\u5C31\u7B80\u5355\u5730\u663E\u793A\u8868\u5355\uFF0C\u82E5\u6709\uFF0C\u5219\u9A8C\u8BC1\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u5E76\u4FDD\u5B58\u5230\u6570\u636E\u5E93\u4E2D</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// application/controllers/GuestbookController.php</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">GuestbookController</span> <span class="token keyword">extends</span> <span class="token class-name">Zend_Controller_Action</span>
<span class="token punctuation">{</span>
    <span class="token comment">// snipping indexAction()...</span>
 
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">signAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$form</span>    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application_Form_Guestbook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">getPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application_Model_Guestbook</span><span class="token punctuation">(</span><span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">getValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$mapper</span>  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application_Model_GuestbookMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$mapper</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token variable">$comment</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_helper</span><span class="token operator">-&gt;</span><span class="token function">redirector</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
 
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">view</span><span class="token operator">-&gt;</span><span class="token property">form</span> <span class="token operator">=</span> <span class="token variable">$form</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u7136\uFF0C\u8FD8\u9700\u8981\u7F16\u8F91\u4E00\u4E0B view <em>application/views/scripts/guestbook/sign.phtml</em></p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">&lt;!-- application/views/scripts/guestbook/sign.phtml --&gt;</span>
 
Please use the form below to sign our guestbook!
 
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">form</span><span class="token operator">-&gt;</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">form</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u68C0\u67E5\u6548\u679C" tabindex="-1"><a class="header-anchor" href="#\u68C0\u67E5\u6548\u679C" aria-hidden="true">#</a> \u68C0\u67E5\u6548\u679C</h2>`,18),G={href:"http://quickstart.local/guestbook/sign",target:"_blank",rel:"noopener noreferrer"},F=n("p",null,"\u586B\u5199\u597D\u8868\u5355\u70B9\u51FB\u63D0\u4EA4\uFF0C\u5C31\u80FD\u770B\u5230\u5217\u8868\u5DF2\u7ECF\u66F4\u65B0\u4E86\uFF1A ![[3c45655730e74b79e32a272715038f96.png]]",-1),D=n("p",null,[n("strong",null,"\u6CE8\uFF1A"),s(" \u4E0A\u9762\u7684\u9A8C\u8BC1\u7801\u90E8\u5206\u8FA8\u8BA4\u5F88\u56F0\u96BE\uFF0C\u5176\u5B9E\u53EA\u8981\u590D\u5236\u4E00\u4E0B\u7C98\u8D34\u5230txt\u6587\u6863\u4E2D\u5C31\u80FD\u770B\u6E05\u695A\u4E86\u3002")],-1),N=n("h2",{id:"\u606D\u559C\u4F60",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u606D\u559C\u4F60","aria-hidden":"true"},"#"),s(" \u606D\u559C\u4F60\uFF01")],-1),z={href:"https://framework.zend.com/manual/1.12/en/reference.html",target:"_blank",rel:"noopener noreferrer"},S={href:"https://framework.zend.com/manual/1.12/en/learning.html",target:"_blank",rel:"noopener noreferrer"};function R(O,H){const a=c("ExternalLinkIcon");return o(),l("div",null,[u,r,k,n("p",null,[s("\u4E0B\u8F7D\u6700\u65B0\u7684 "),n("a",d,[s("Zend Framework 1.12.20 \u6E90\u7801\u5305"),t(a)]),s("\uFF0C\uFF08\u6211\u4EEC\u4F7F\u7528\u7684\u662F Zend Framework 1\uFF0C\u6240\u4EE5\u4E0B\u9762\u7684\u5185\u5BB9\u90FD\u662F\u57FA\u4E8E Zend 1\uFF09")]),v,m,b,g,n("p",null,[h,n("a",f,[s("Zend Framework \u5404\u4E2A\u7248\u672C\u4E0B\u8F7D"),t(a)]),y,w,_,s(" \u7B26\u53F7\u8868\u793A\u5F53\u524D\u73AF\u5883\u662F Linux \u547D\u4EE4\u884C\u7EC8\u7AEF\uFF0C\u5728\u7B49\u5F85\u8F93\u5165\u4E00\u4E2A\u4EBA\u547D\u4EE4\u3002")]),q,n("p",null,[s("\u5728 Zend \u5B89\u88C5\u76EE\u5F55\u4E0B\u7684 bin/ \u76EE\u5F55\u4E0B\u6709 "),n("a",$,[s("zf.sh"),t(a)]),s(" \u811A\u672C\u6587\u4EF6\uFF0C\u4F60\u9700\u8981\u5728\u7CFB\u7EDFpath\u76EE\u5F55\u4E0B\u521B\u5EFA\u8BE5\u6587\u4EF6\u7684\u94FE\u63A5\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5728\u547D\u4EE4\u884C\u4E2D\u4EFB\u4F55\u5730\u65B9\u4F7F\u7528zf\u547D\u4EE4\u521B\u5EFA\u9879\u76EE\u4E86\u3002")]),x,n("p",null,[s("\u6211\u4EEC\u9700\u8981\u8BBE\u7F6E\u4E00\u4E2A\u865A\u62DF\u4E3B\u673A\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u8F93\u5165\u57DF\u540D\u6765\u8BBF\u95EE\u6211\u4EEC\u7684\u7F51\u7AD9\u4E86\u3002\u5047\u8BBE\u4F60\u5DF2\u7ECF\u914D\u7F6E\u597D\u4E86 php+apache+mysql \u8FD0\u884C\u73AF\u5883\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u8BF7\u53C2\u8003"),n("a",T,[s("\u6559\u7A0B"),t(a)])]),A,n("p",null,[s("\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528 "),n("a",C,[s("Table Data Gateway"),t(a)]),s(" \u673A\u5236\u6765\u8FDE\u63A5\u6570\u636E\u6E90\u3002"),E,s(" \u63D0\u4F9B\u4E86\u8FD9\u4E2A\u529F\u80FD\u3002")]),P,n("p",null,[s("\u7136\u540E\u521B\u5EFA\u4E00\u4E2A "),n("a",Z,[s("Data Mapper"),t(a)]),s("\u3002Data Mapper \u6620\u5C04\u5BF9\u8C61\u5230\u6570\u636E\u5E93\u3002\u672C\u4F8B\u4E2D\uFF0C\u5B83\u5C06\u6620\u5C04 model \u5230\u6570\u636E\u6E90\u3002")]),I,n("p",null,[s("\u5207\u6362\u5230\u6D4F\u89C8\u5668\uFF0C\u6253\u5F00\uFF1A"),n("a",M,[s("http://guestbook.local/guestbook"),t(a)]),s(" \uFF0C\u4F60\u5E94\u8BE5\u770B\u5230\u8FD9\u4E9B\u5185\u5BB9\uFF1A ![[763079256584fea45654c58d5496433e.png]]")]),L,n("p",null,[s("\u73B0\u5728\u518D\u6253\u5F00\u6D4F\u89C8\u5668\uFF1A"),n("a",G,[s("http://quickstart.local/guestbook/sign"),t(a)]),s(" \u770B\u770B\uFF0C\u6548\u679C\u5982\u4E0B\uFF1A ![[5ec4048767b8ad90747a7f4e6dbeef6c.png]]")]),F,D,N,n("p",null,[s("\u4F60\u5DF2\u7ECF\u6210\u529F\u5730\u4F7F\u7528 Zend Framework \u7684\u5E38\u7528\u529F\u80FD\u5EFA\u7ACB\u4E86\u4E00\u4E2A\u7B80\u5355\u7684\u5E94\u7528\u7A0B\u5E8F\u3002Zend Framework \u5185\u7F6E\u4E86\u5F88\u591A\u7EC4\u4EF6\uFF0C\u4F60\u53EF\u4EE5\u76F4\u63A5\u7528\u5728\u4F60\u7684\u9879\u76EE\u4E2D\uFF0C\u8FD9\u4E9B\u7EC4\u4EF6\u5305\u62EC web services\uFF0C\u641C\u7D22\uFF0CPDF\u8BFB\u53D6\u548C\u521B\u5EFA\uFF0C\u8EAB\u4EFD\u8BA4\u8BC1\u7B49\u7B49\u3002\u53EF\u4EE5\u5728 "),n("a",z,[s("\u6587\u6863\u53C2\u8003"),t(a)]),s(" \u4E2D\u627E\u5230\u66F4\u591A\u76F8\u5173\u7684\u6280\u672F\u7EC6\u8282\u3002")]),n("blockquote",null,[n("p",null,[s("\u82F1\u6587\u539F\u6587\u94FE\u63A5\uFF1A"),n("a",S,[s("https://framework.zend.com/manual/1.12/en/learning.html"),t(a)])])])])}const V=p(i,[["render",R],["__file","2017-01-05-zend-framework-1-quick-start.html.vue"]]);export{V as default};
